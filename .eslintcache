[{"/Users/paula/Projects/pairing-app-frontend/src/index.js":"1","/Users/paula/Projects/pairing-app-frontend/src/reportWebVitals.js":"2","/Users/paula/Projects/pairing-app-frontend/src/App.js":"3","/Users/paula/Projects/pairing-app-frontend/src/axios-instance.js":"4","/Users/paula/Projects/pairing-app-frontend/src/containers/Matches/Matches.js":"5","/Users/paula/Projects/pairing-app-frontend/src/components/UI/Spinner/Spinner.js":"6","/Users/paula/Projects/pairing-app-frontend/src/containers/Auth/Logout/Logout.js":"7","/Users/paula/Projects/pairing-app-frontend/src/hoc/Layout/Layout.js":"8","/Users/paula/Projects/pairing-app-frontend/src/components/Home/Home.js":"9","/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/Profile.js":"10","/Users/paula/Projects/pairing-app-frontend/src/containers/Auth/Auth.js":"11","/Users/paula/Projects/pairing-app-frontend/src/components/UI/Button/Button.js":"12","/Users/paula/Projects/pairing-app-frontend/src/hoc/Aux/Aux.js":"13","/Users/paula/Projects/pairing-app-frontend/src/containers/Matches/Match/Match.js":"14","/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/Toolbar/Toolbar.js":"15","/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/NavigationLinks/NavigationLinks.js":"16","/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/NavigationLinks/NavigationLink/NavigationLink.js":"17","/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/CreateProfile.js":"18","/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/ShowProfile.js":"19","/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Messages.js":"20","/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Message.js":"21","/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/SendMessage.js":"22","/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Conversation.js":"23"},{"size":593,"mtime":1607700387451,"results":"24","hashOfConfig":"25"},{"size":362,"mtime":1607524083174,"results":"26","hashOfConfig":"25"},{"size":3636,"mtime":1608053087830,"results":"27","hashOfConfig":"25"},{"size":243,"mtime":1608053087830,"results":"28","hashOfConfig":"25"},{"size":1519,"mtime":1608053087835,"results":"29","hashOfConfig":"25"},{"size":155,"mtime":1607524083171,"results":"30","hashOfConfig":"25"},{"size":246,"mtime":1607524083172,"results":"31","hashOfConfig":"25"},{"size":433,"mtime":1608053087840,"results":"32","hashOfConfig":"25"},{"size":365,"mtime":1608053087832,"results":"33","hashOfConfig":"25"},{"size":709,"mtime":1608053087839,"results":"34","hashOfConfig":"25"},{"size":3967,"mtime":1608053087833,"results":"35","hashOfConfig":"25"},{"size":292,"mtime":1607524083171,"results":"36","hashOfConfig":"25"},{"size":57,"mtime":1607524083173,"results":"37","hashOfConfig":"25"},{"size":251,"mtime":1608053087834,"results":"38","hashOfConfig":"25"},{"size":306,"mtime":1608053087833,"results":"39","hashOfConfig":"25"},{"size":832,"mtime":1608053087832,"results":"40","hashOfConfig":"25"},{"size":368,"mtime":1607524083168,"results":"41","hashOfConfig":"25"},{"size":2126,"mtime":1608053087838,"results":"42","hashOfConfig":"25"},{"size":1156,"mtime":1608067780090,"results":"43","hashOfConfig":"25"},{"size":4337,"mtime":1608053087837,"results":"44","hashOfConfig":"25"},{"size":475,"mtime":1608053087836,"results":"45","hashOfConfig":"25"},{"size":1020,"mtime":1608053087837,"results":"46","hashOfConfig":"25"},{"size":586,"mtime":1608053087835,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"do1t1h",{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"50"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"50"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"/Users/paula/Projects/pairing-app-frontend/src/index.js",[],["98","99"],"/Users/paula/Projects/pairing-app-frontend/src/reportWebVitals.js",[],"/Users/paula/Projects/pairing-app-frontend/src/App.js",[],"/Users/paula/Projects/pairing-app-frontend/src/axios-instance.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Matches/Matches.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/UI/Spinner/Spinner.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Auth/Logout/Logout.js",[],"/Users/paula/Projects/pairing-app-frontend/src/hoc/Layout/Layout.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/Home/Home.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/Profile.js",["100","101","102"],"import { Component } from 'react';\nimport axios from '../../axios-instance';\nimport classes from './Profile.module.css';\nimport Button from '../../components/UI/Button/Button';\nimport CreateProfile from './CreateProfile';\nimport ShowProfile from './ShowProfile';\n\nclass Profile extends Component {\n  state = {\n    \n  }\n\n  render() {\n   let profile = null;\n\n\n    if (this.props.current_user.profileComplete){\n      profile = <ShowProfile user={this.props.current_user} saveUser={this.props.saveUser} />\n    } else {\n      profile = <CreateProfile user={this.props.current_user} saveUser={this.props.saveUser}/>\n    }\n\n\n    return(\n      <div>\n        {profile}\n      </div>\n    )\n  }\n}\n\nexport default Profile;","/Users/paula/Projects/pairing-app-frontend/src/containers/Auth/Auth.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/UI/Button/Button.js",[],"/Users/paula/Projects/pairing-app-frontend/src/hoc/Aux/Aux.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Matches/Match/Match.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/Toolbar/Toolbar.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/NavigationLinks/NavigationLinks.js",[],"/Users/paula/Projects/pairing-app-frontend/src/components/Navigation/NavigationLinks/NavigationLink/NavigationLink.js",[],["103","104"],"/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/CreateProfile.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Profile/ShowProfile.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Messages.js",["105","106"],"import { Component } from 'react';\nimport axios from '../../axios-instance';\nimport classes from './Messages.module.css';\nimport Aux from '../../hoc/Aux/Aux';\nimport Spinner from '../../components/UI/Spinner/Spinner';\nimport SendMessage from './SendMessage';\nimport Conversation from './Conversation';\nimport Message from './Message';\n\nclass Messages extends Component {\n  state = {\n    conversations: null,\n    showConversation: null,\n    loaded: false\n  }\n\n  componentDidMount() {\n    this.getMessages();\n  }\n\n  getMessages = () => {\n    axios.get('/messages/' + this.props.current_user.id)\n    .then(response => {\n      const messages = response.data;\n      this.formConversations(messages);\n    })\n  }\n  //filter all messages into conversations with other users\n  formConversations = (messages) => {\n    const conversations = {};\n    const currentUserId = this.props.current_user.id;\n    messages.forEach(message => {\n      //get the id of the other user involved in the message, whether sender or receiver\n      let otherUserId = currentUserId === message.sender.id ? message.receiver.id : message.sender.id;\n      //if the conversation doesn't exist yet, create it in the converstations object with key equal to otherUserId\n      if (conversations[otherUserId] === undefined) {\n        //initialise as an empty array, then push relevant messages into it\n        conversations[otherUserId] = [];\n      }\n      conversations[otherUserId].push(message);\n    })\n    const conversationsArray = Object.values(conversations);\n    this.setState({\n      conversations: conversationsArray,\n      loaded: true\n    })\n  }\n\n  selectConversation = (index) => {\n    this.setState({\n      showConversation: index\n    })\n    this.markAsRead(index);\n  }\n\n  markAsRead = (index) => {\n    let messages = this.state.conversations[index]\n    let unreadMessages = messages.filter(message => {\n      return message.viewed === false && message.receiver.id === this.props.current_user.id\n    });\n    const body = {\n      unreadMessages: unreadMessages\n    }\n    if(unreadMessages.length > 0) {\n      axios.post('/messages/unread', body)\n      .then(response => {\n        console.log(response);\n        this.getMessages();\n      })\n    }\n  }\n\n  render() {\n    let conversations = <Spinner />\n    if (this.state.loaded) {\n      conversations = this.state.conversations.map((conversation, index) => {\n        let newMessages = false;\n        conversation.forEach(message => {\n          if (!message.viewed && message.receiver.id === this.props.current_user.id) {\n            newMessages = true;\n          }\n        })\n        return <Conversation\n                  key={index}\n                  messages={conversation} \n                  user={this.props.current_user} \n                  selectConversation={() => this.selectConversation(index)} \n                  selected={this.state.showConversation === index}\n                  newMessages={newMessages}/>\n      })\n    }\n    let messageForm = null;\n    let messages = null;\n    if(this.state.showConversation !== null) {\n      messages = this.state.conversations[this.state.showConversation]\n      messages = messages.sort((a,b) => {\n        let aDate = new Date(a.time_sent);\n        let bDate = new Date(b.time_sent);\n        return aDate - bDate;\n      })\n      messages = this.state.conversations[this.state.showConversation].map(message => {\n        return <Message\n                  key={message.id}\n                  message={message}\n                  user={this.props.current_user}\n                  sender={this.props.current_user.id === message.sender.id}/>\n      })\n      messageForm = <SendMessage\n        sender={this.props.current_user}\n        receiver={this.state.conversations[this.state.showConversation][0].sender.id == this.props.current_user.id ? this.state.conversations[this.state.showConversation][0].receiver : this.state.conversations[this.state.showConversation][0].sender}\n        getMessages={this.getMessages}/>\n    }\n\n    return (\n      <div className={classes.Container}>\n        <div className={classes.ConversationContainer}>\n          <h3>Conversations</h3>\n          {conversations}\n        </div>\n        <div className={classes.MessageContainer}>\n          \n          {messages}\n          {messageForm}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Messages","/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Message.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/SendMessage.js",[],"/Users/paula/Projects/pairing-app-frontend/src/containers/Messages/Conversation.js",[],{"ruleId":"107","replacedBy":"108"},{"ruleId":"109","replacedBy":"110"},{"ruleId":"111","severity":1,"message":"112","line":2,"column":8,"nodeType":"113","messageId":"114","endLine":2,"endColumn":13},{"ruleId":"111","severity":1,"message":"115","line":3,"column":8,"nodeType":"113","messageId":"114","endLine":3,"endColumn":15},{"ruleId":"111","severity":1,"message":"116","line":4,"column":8,"nodeType":"113","messageId":"114","endLine":4,"endColumn":14},{"ruleId":"107","replacedBy":"117"},{"ruleId":"109","replacedBy":"118"},{"ruleId":"111","severity":1,"message":"119","line":4,"column":8,"nodeType":"113","messageId":"114","endLine":4,"endColumn":11},{"ruleId":"120","severity":1,"message":"121","line":110,"column":86,"nodeType":"122","messageId":"123","endLine":110,"endColumn":88},"no-native-reassign",["124"],"no-negated-in-lhs",["125"],"no-unused-vars","'axios' is defined but never used.","Identifier","unusedVar","'classes' is defined but never used.","'Button' is defined but never used.",["124"],["125"],"'Aux' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-global-assign","no-unsafe-negation"]